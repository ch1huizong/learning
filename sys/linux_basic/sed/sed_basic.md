# Sed基础

1. 问题:

    自动化编辑

2. 用法: sed [-nefr] [action] [file1 file2 file3 ... ]

3. 选项

    * -n     安静模式，只有经过sed特殊处理的行才会被列出来

    * -e     命令模式下的动作

    * -f     脚本文件

    * -r     扩展正则

    * -i['后缀']     直接修改文件,如果有后缀，则会另外备份一份，*代表现在的文件名

    * -s     分割,把每一个输入文件当作单一的流，而不是整个大流的一部分

    * -l N   折行长度

    * -z		输入行以'\0'结尾

    pattern空间: 存在待处理的一行,下一行就没了
    hold空间: 缓存 

4. 地址

    * 内容
        - 数字
        - 正则/re/

    * 地址个数
        - 0 所有行
        - 1 指定行
        - 2 范围

    - 'number'  特定行

    - 'start~step'  阶

    - '$'   输入文件最后一行,若指定-i和-s则是每个输入文件最后一行

    - '/p1/' 若是空//，则重复最后一个正则，空//不能和修饰符合用
	- '/p1/,/p2/'  正则范围,也可以用%作分割符号

    - '0,/p1/'  p1匹配从第一行开始

    - 'add1,+N'

    - 'add1,~N'


    修饰符号：I（忽略大小写），M（多行），！（否）
    第二个地址匹配默认是从第一个地址下面的行开始


4. 动作

    1. 通用
        * # 注释,若#n开始，则强制-n选项了
        * q     退出，单一地址
        * p     打印
        * {}    命令组
        * a
        * i
        * p

        * H     追加, p -> h
        * h     拷贝到h, 原h被覆盖
        * G     追加，h -> p
        * g     拷贝到p, 原p被覆盖

        * w f   写数据到文件f
        * r f   从文件f读数据

        * d     删除p中所有行,读入下一行

                删除f空白行:
                    sed -e '/^$/d' f      

        * D     删除多行p内的第一行，不读入下一行

                合并f空白行:
                    sed -e '/^$/{N; /^$/D}' f 不行啊?

        * n     下一行,p两行，指向读的这一行
        * N     下一行，看成一行

        * s     替换

            + 形式:
                [address1[,address2]]s/patt/repl/flags

            + 注意点:
                - repl包括
                    - \1-9反向引用,被\(..\)包起来的
                    - &代表前面patt字符串
                    - \L,\l, \U,\u,\E 小写形式

                - 定界符还可以是:或|或#

		    + flags:
                + g     全行
                + N     第N个匹配
                + p     打印
                + w f   写到文件
                + I/i   忽略大小写
                + M/m   多行模式

            + 例子:
	            * s/pattern/new/Ng 从第N处开始替换



5. 问题：

    * 替换换行符\n问题;
