# Sed基础
---

1. 问题:

    自动化编辑


2. 用法: sed [-nefr] [action] [inputfiles ... ]


3. 选项

    * -n     安静模式，只有经过sed特殊处理的行才会被列出来

    * -e     命令模式下的动作

    * -f     脚本文件

    * -r     扩展正则

    * -i['后缀']     直接修改文件,如果有后缀，则会另外备份一份，*代表现在的文件名

    * -s     分割,把每一个输入文件当作单一的流，而不是整个大流的一部分

    * -l N   折行长度

    * -z		输入行以'\0'结尾

    --posix, 
    --follow-symlinks
    -u, -b


    pattern空间: 存在待处理的一行,下一行就没了

    hold空间: 缓存 


3. 地址

    - 'number'  特定行

    - 'start~step'  阶

    - '$'   输入文件最后一行,若指定-i和-s则是每个输入文件最后一行

    - '/p1/' 若是空//，则重复最后一个正则，空//不能和修饰符合用
	- '/p1/,/p2/'  正则范围,也可以用%作分割符号

    - '0,/p1/'  p1匹配从第一行开始

    - 'add1,+N'

    - 'add1,~N'


    修饰符号：I（忽略大小写），M（多行），！（否）
    第二个地址匹配默认是从第一个地址下面的行开始


4. 动作

    1. 通用
        * # 注释,若#n开始，则强制-n选项了
        * q     退出，单一地址
        * d     删除，立即下一循环
        * p     打印
        * n     next
        * {}    命令组
        * c
        * a
        * i
        * p
        * s

    2. 替换命令(s)

        s/patt/New/flags

        - repl可以包括\1-9反向引用, & 反向全引用, \L,\l, \U,\u,\E 小写形式，下一个字符

		- flags
		    * g     全行
			* N     第N个匹配
			* p     打印
			* I/i   忽略大小写
			* M/m   多行模式
			* w file    写到文件

        - 例子
	        * s/pattern/new/Ng 从第N处开始替换

        注意:
            1. 定界符还可以是:或|
            2. &整体字符串匹配，\1子模式匹配（后向引用）	
