
# 网络编程和Twisted记录

### 一. 关于网络编程

    1. 网络编程类型

        * 客户端

        * 服务器端

    2. 多个任务的编程模式

        * 单线程同步;

        * 多线程;

        * 单线程异步;


    2. 多任务难点

        * 同步程序， 一个任务的IO阻塞会影响下一个任务的执行？关键

        * 异步编程将请求和响应解耦了！


    3. 异步适用场合

        * 后台任务; 

        * 任务执行大量IO操作; 

        * 任务相互独立，内部交互很少


    4. 注意点

        关键点： 对阻塞操作一定要变成非阻塞操作!

    5. 优势

        哪一个服务器响应快速响应哪一个？

### 二. Twisted介绍

    1. Twisted组件

        * Reactor 事件循环

        * Transports 代表一条TCP连接

        * Protocols 代表链接上的一个具体协议(http)

        * Protocol Factories (建立链接，绑定到具体的协议上)

        * Deferred 
            - 管理回调函数
            - 不一定要结合Reactor, 可以单独使用
            - 控制权在回调链中的传递依赖于上一个“返回值"的类型
            
            ==特性==
            1. 嵌套
            2. 可以在返回之前被激活
            3. DeferredList
            4. inlineCallbacks

        一个异步操作等待另一个异步操作

    2. 测试trial
    
    3. Service，Application, Deamon，插件系统(启动应用的简便方法)


### 三. 实现的应用?
    
    1. 服务器

        * 诗歌下载

        * 诗歌转换
        
        * 缓存代理


    2. 客户端

        * 下载诗歌+转换诗歌
